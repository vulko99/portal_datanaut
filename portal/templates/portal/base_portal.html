{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>DataNaut · Portal{% block title_suffix %}{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
          crossorigin="anonymous">

    <style>
        :root {
            --dn-bg-nav: #020617;
            --dn-bg-page: #020715;
            --dn-bg-surface: #050816;
            --dn-text-main: #e5e7eb;
            --dn-text-strong: #f9fafb;
            --dn-text-muted: #9ca3af;
            --dn-accent-teal: #14f4d4;
            --dn-accent-green: #22c55e;
            --dn-accent-blue: #2563eb;
            --dn-border-subtle: rgba(148, 163, 184, 0.35);
        }

        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background:
                radial-gradient(circle at 0% 0%, #0f766e 0, #020617 30%),
                radial-gradient(circle at 100% 0%, #4c1d95 0, #020617 40%),
                radial-gradient(circle at 50% 100%, #1d4ed8 0, #020617 40%);
            color: var(--dn-text-main);
        }

        /* ---------- NAVBAR ---------- */

        .portal-nav {
            background: var(--dn-bg-nav);
            border-bottom: 1px solid rgba(148, 163, 184, 0.3);
            min-height: 56px;
        }

        .portal-container {
            max-width: 1240px;
        }

        .portal-brand img {
            height: 26px;
            width: auto;
        }

        .portal-brand-title {
            font-weight: 600;
            font-size: 1rem;
            color: var(--dn-text-strong);
            letter-spacing: 0.02em;
        }

        .portal-brand-sub {
            font-size: 0.8rem;
            color: var(--dn-text-muted);
        }

        .navbar-nav .nav-link {
            font-size: 0.88rem;
            color: var(--dn-text-muted);
        }

        .navbar-nav .nav-link.active,
        .navbar-nav .nav-link:hover,
        .navbar-nav .nav-link:focus {
            color: var(--dn-text-strong);
        }

        .user-pill {
            display: inline-flex;
            align-items: center;
            border-radius: 999px;
            padding: 0.15rem 0.75rem;
            font-size: 0.8rem;
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid rgba(148, 163, 184, 0.4);
            color: var(--dn-text-main);
        }

        /* ---------- PAGE LAYOUT ---------- */

        .portal-main {
            min-height: 100vh;
            padding-top: 64px; /* място за fixed navbar */
            padding-bottom: 32px;
        }

        /* ---------- HEADINGS / TYPOGRAPHY (за всички табове) ---------- */

        .section-header {
            display: flex;
            flex-direction: column;
            gap: 0.15rem;
            margin-bottom: 1rem;
        }

        .section-title {
            font-size: 1.15rem;
            font-weight: 600;
            letter-spacing: 0.01em;
            color: var(--dn-text-strong);
        }

        .section-subtitle {
            font-size: 0.88rem;
            color: var(--dn-text-muted);
        }

        .section-eyebrow {
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-size: 0.72rem;
            color: var(--dn-text-muted);
            font-weight: 500;
        }

        /* ---------- CARDS / METRICS ---------- */

        .portal-card {
            background:
                radial-gradient(circle at 0 0, rgba(20, 244, 212, 0.12), transparent 55%),
                radial-gradient(circle at 100% 0, rgba(129, 140, 248, 0.16), transparent 60%),
                rgba(15, 23, 42, 0.96);
            border-radius: 16px;
            border: 1px solid var(--dn-border-subtle);
            padding: 14px 18px;
            color: var(--dn-text-main);
        }

        .portal-card h5,
        .portal-card h6 {
            color: var(--dn-text-strong);
            font-size: 0.98rem;
        }

        .portal-card-muted {
            font-size: 0.82rem;
            color: var(--dn-text-muted);
        }

        .metric-label {
            text-transform: uppercase;
            letter-spacing: 0.08em;
            font-size: 0.72rem;
            color: var(--dn-text-muted);
            margin-bottom: 0.15rem;
        }

        .metric-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--dn-text-strong);
        }

        .metric-sub {
            font-size: 0.8rem;
            color: #4ade80;
            margin-bottom: 0.4rem;
        }

        .metric-tagline {
            font-size: 0.78rem;
            color: var(--dn-text-muted);
        }

        .badge-demo {
            font-size: 0.78rem;
            border-radius: 999px;
            padding: 0.25rem 0.7rem;
            border: 1px solid rgba(52, 211, 153, 0.7);
            background: rgba(6, 95, 70, 0.55);
            color: #bbf7d0;
        }

        /* ---------- TABLES ---------- */

        .portal-table {
            width: 100%;
            border-collapse: collapse;
        }

        .portal-table thead th {
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--dn-text-muted);
            border-bottom: 1px solid rgba(148, 163, 184, 0.5);
            padding: 0.55rem 0.5rem;
            background: rgba(15, 23, 42, 0.95);
        }

        .portal-table tbody tr:nth-child(odd) {
            background: rgba(15, 23, 42, 0.9);
        }

        .portal-table tbody tr:nth-child(even) {
            background: rgba(9, 9, 11, 0.9);
        }

        .portal-table tbody td {
            font-size: 0.86rem;
            color: var(--dn-text-main);
            padding: 0.45rem 0.5rem;
            border-bottom: 1px solid rgba(31, 41, 55, 0.8);
        }

        .portal-table .cell-muted {
            color: var(--dn-text-muted);
            font-size: 0.8rem;
        }

        .table-caption {
            font-size: 0.8rem;
            color: var(--dn-text-muted);
            margin-top: 0.35rem;
        }

        .pill {
            display: inline-flex;
            align-items: center;
            border-radius: 999px;
            padding: 0.15rem 0.6rem;
            font-size: 0.78rem;
            border: 1px solid rgba(148, 163, 184, 0.6);
            color: var(--dn-text-main);
        }

        .pill-green {
            border-color: rgba(52, 211, 153, 0.8);
            color: #bbf7d0;
            background: rgba(6, 95, 70, 0.4);
        }

        .pill-amber {
            border-color: rgba(251, 191, 36, 0.9);
            color: #fef9c3;
            background: rgba(146, 64, 14, 0.6);
        }

        .pill-red {
            border-color: rgba(248, 113, 113, 0.9);
            color: #fee2e2;
            background: rgba(127, 29, 29, 0.6);
        }

        .link-inline {
            color: var(--dn-accent-teal);
            text-decoration: none;
        }

        .link-inline:hover {
            text-decoration: underline;
        }

        @media (max-width: 991.98px) {
            .portal-main {
                padding-top: 72px;
            }
        }
    </style>

    {% block extra_head %}{% endblock %}
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark portal-nav fixed-top">
    <div class="container-fluid portal-container">
        <a class="navbar-brand d-flex align-items-center portal-brand"
           href="{% url 'portal:dashboard' %}">
            <img src="{% static 'landing/logo.png' %}" alt="DataNaut logo">
            <div class="ms-2">
                <div class="portal-brand-title">DataNaut</div>
                <div class="portal-brand-sub">Portal</div>
            </div>
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#portalNavbar" aria-controls="portalNavbar"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="portalNavbar">
            {% if request.user.is_authenticated %}
                <ul class="navbar-nav ms-auto align-items-lg-center gap-lg-2">
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'dashboard' %}active{% endif %}"
                           href="{% url 'portal:dashboard' %}">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'contracts' %}active{% endif %}"
                           href="{% url 'portal:contracts' %}">Contracts</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'usage' %}active{% endif %}"
                           href="{% url 'portal:usage' %}">Usage</a>
                    </li>

                    <li class="nav-item ms-lg-3 mt-2 mt-lg-0">
                        <span class="user-pill">
                            {{ request.user.username }}
                        </span>
                    </li>
                    <li class="nav-item ms-2 mt-2 mt-lg-0">
    <a class="nav-link" href="{% url 'logout' %}">Logout</a>
</li>
                </ul>
            {% else %}
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'login' %}">Login</a>
                    </li>
                </ul>
            {% endif %}
        </div>
    </div>
</nav>

<main class="portal-main">
    <div class="container-fluid portal-container px-3 px-md-4">
        {% block content %}{% endblock %}
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

{% block extra_js %}{% endblock %}
</body>
</html>
