{% extends "portal/base_portal.html" %}

{% block title_suffix %} Â· Upload contract{% endblock %}

{% block content %}
<div class="mb-3">
    <h4 class="mb-0 text-light">Upload contract</h4>
    <div class="portal-card-muted">
        Ingest a new vendor contract. The document will be stored securely and processed later.
    </div>
</div>

<div class="portal-card">
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}

        {% if form.non_field_errors %}
            <div class="alert alert-danger py-2">
                {{ form.non_field_errors }}
            </div>
        {% endif %}

        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label text-light">Vendor</label>
                {{ form.vendor }}
                {% if form.vendor.errors %}
                    <div class="text-danger small">{{ form.vendor.errors }}</div>
                {% endif %}
            </div>

            <div class="col-md-6">
                <label class="form-label text-light">Title</label>
                {{ form.title }}
                {% if form.title.errors %}
                    <div class="text-danger small">{{ form.title.errors }}</div>
                {% endif %}
            </div>

            <div class="col-md-6">
                <label class="form-label text-light">Entity / desk / cost centre</label>
                {{ form.entity }}
                {% if form.entity.errors %}
                    <div class="text-danger small">{{ form.entity.errors }}</div>
                {% endif %}
            </div>

            <div class="col-md-6">
                <label class="form-label text-light">Annual value</label>
                {{ form.annual_value }}
                {% if form.annual_value.errors %}
                    <div class="text-danger small">{{ form.annual_value.errors }}</div>
                {% endif %}
            </div>

            <div class="col-md-4">
                <label class="form-label text-light">Start date</label>
                {{ form.start_date }}
                {% if form.start_date.errors %}
                    <div class="text-danger small">{{ form.start_date.errors }}</div>
                {% endif %}
            </div>

            <div class="col-md-4">
                <label class="form-label text-light">End date</label>
                {{ form.end_date }}
                {% if form.end_date.errors %}
                    <div class="text-danger small">{{ form.end_date.errors }}</div>
                {% endif %}
            </div>

            <div class="col-md-4">
                <label class="form-label text-light">Renewal date</label>
                {{ form.renewal_date }}
                {% if form.renewal_date.errors %}
                    <div class="text-danger small">{{ form.renewal_date.errors }}</div>
                {% endif %}
            </div>

            <div class="col-12">
                <label class="form-label text-light">Contract file</label>
                {{ form.file }}
                <div class="portal-card-muted small">
                    Supported: PDF, DOCX, etc. Size limits will be enforced later.
                </div>
                {% if form.file.errors %}
                    <div class="text-danger small">{{ form.file.errors }}</div>
                {% endif %}
            </div>
        </div>

        <div class="mt-3 d-flex justify-content-between">
            <a href="{% url 'portal:contracts' %}" class="btn btn-sm btn-outline-secondary">
                Cancel
            </a>
            <button type="submit" class="btn btn-sm btn-success">
                Upload
            </button>
        </div>
    </form>
</div>
{% endblock %}
