{% extends "portal/base_portal.html" %}
{% block content %}
  <div class="page-title">Contracts</div>
  <div class="page-subtitle">Signed agreements and order forms. Filtered to your portal account (owner).</div>

  <div class="cardx">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <div class="muted">Total contracts: <strong style="color:var(--strong)">{{ contracts|length }}</strong></div>
      <div class="muted">Upload workflow can be added next (portal upload + approvals).</div>
    </div>

    {% if contracts %}
      <table class="tablex">
        <thead>
          <tr>
            <th style="width:28%;">Contract</th>
            <th style="width:20%;">Vendor</th>
            <th style="width:14%;">Start</th>
            <th style="width:14%;">End</th>
            <th style="width:12%;">Status</th>
            <th style="width:12%;">Annual value</th>
          </tr>
        </thead>
        <tbody>
          {% for c in contracts %}
            <tr>
              <td>
                <strong>{{ c.contract_name }}</strong>
                {% if c.contract_id %}<div class="muted">ID: {{ c.contract_id }}</div>{% endif %}
              </td>
              <td class="muted">{{ c.vendor.name }}</td>
              <td class="muted">{{ c.start_date|default:"—" }}</td>
              <td class="muted">{{ c.end_date|default:"—" }}</td>
              <td class="muted">{{ c.get_status_display }}</td>
              <td class="muted" style="text-align:right;">
                {% if c.annual_value %}{{ c.annual_value }} {{ c.currency }}{% else %}—{% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="empty">No contracts yet for this user.</div>
    {% endif %}
  </div>
{% endblock %}
